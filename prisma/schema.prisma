generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:../db/hydrohomies.db"
}

model Products {
  id          Int                 @id @default(autoincrement())
  name        String
  brand       String
  description String
  picture_uri String
  volume      Int
  amount      Int
  rating      Int
  price       Float
  categories  Categories[]
  cart        Carts[]
  orders      OrdersOnProducts[]
}

model Categories {
  id       Int                 @id @default(autoincrement())
  name     String
  products Products[]
}

model Users {
  id             Int      @id @default(autoincrement())
  first_name     String
  last_name      String
  email          String
  phone          String
  city           String
  street         String
  password       String
  payment_method String
  cart           Carts[]
  orders         Orders[]
}

model Carts {
  uid      Int
  user     Users    @relation(fields: [uid], references: [id])
  pid      Int
  product  Products @relation(fields: [pid], references: [id])
  quantity Int

  @@id([uid, pid])
}

model Orders {
  id            Int           @id @default(autoincrement())
  total_price   Float
  order_date    DateTime       @default(now())
  uid           Int
  user          Users         @relation(fields: [uid], references: [id])
  products      OrdersOnProducts[]
}

model OrdersOnProducts {
    oid         Int 
    order       Orders   @relation(fields: [oid], references: [id])
    pid         Int
    product     Products @relation(fields: [pid], references: [id])
    quantity    Int

    @@id([oid, pid])
}


